"use strict";const textInput=document.querySelector(".js-input"),searchBtn=document.querySelector(".js-searchBtn"),seriesListSection=document.querySelector(".js-results"),favoritesListSection=document.querySelector(".js-favorites"),resetBtn=document.querySelector(".js-resetBtn"),seriesTitle=document.querySelector(".js-titlesBtn");let series=[],favoriteSeries=[];function handleClickBtn(e){e.preventDefault(),fetch("https://api.jikan.moe/v3/search/anime?q="+textInput.value).then(e=>e.json()).then(e=>{console.log(e),series=e.results,paintSeries()})}function getSeriesHtml(e){let t="";return e.score>7?t+=`<li class="resultsListElem js-list" data-id="${e.mal_id}"> \n    <img class="imgResults" src="${e.image_url}" alt="${e.title}" /> \n    <h3 class="titleResults">${e.title}</h3>\n    <p>puntuación: ${e.score}</p>    \n    <p>recomendado</p>\n    </li>`:t+=`<li class="resultsListElem js-list" data-id="${e.mal_id}"> \n    <img class="imgResults" src="${e.image_url}" alt="${e.title}" /> \n    <h3 class="titleResults">${e.title}</h3>\n    <p>puntuación: ${e.score}</p>    \n    </li>`,t}function paintSeries(){let e="";for(const t of series)e+=getSeriesHtml(t),null===t.image_url?seriesListSection.innerHTML+=`<li>\n      <img src="https://via.placeholder.com/210x295/ffffff/666666/?text=${t.type}" alt="${t.title}" />\n      <h3>${t.title}</h3>\n      </li>`:seriesListSection.innerHTML=e;const t=document.querySelectorAll(".js-list");for(const e of t)e.addEventListener("click",handleClickToFavorites)}function handleClickToFavorites(e){const t=parseInt(e.currentTarget.dataset.id),i=series.find(e=>e.mal_id===t),s=favoriteSeries.find(e=>e.mal_id===t);console.log({favoriteSerieData:s}),void 0===s?(favoriteSeries.push(i),e.currentTarget.classList.add("changedColour")):(favoriteSeries=favoriteSeries.filter(e=>e.mal_id!==t),e.currentTarget.classList.remove("changedColour")),setFavoriteSerieInLocalStorage(),paintFavoriteList()}function paintFavoriteList(){favoritesListSection.innerHTML="";for(const e of favoriteSeries)getFavItem(e);const e=document.querySelectorAll(".js-removeSerie");for(const t of e)t.addEventListener("click",handleClickRemoveBtn);setFavoriteSerieInLocalStorage()}function getFavItem(e){favoritesListSection.innerHTML+=`\n    <li class="favList js-list" data-id="${e.mal_id}">\n    <img src="${e.image_url}" alt="${e.title}" />\n    <h3 class="favSeriesTitle js-favoriteTitle">${e.title}</h3>\n    <div class="cross js-removeSerie" data-id="${e.mal_id}"><p class="cross__text">x</p></div>\n    </li>    \n    `}function handleClickRemoveBtn(e){const t=parseInt(e.currentTarget.dataset.id);favoriteSeries.find(e=>e.mal_id===t).mal_id===t&&(favoriteSeries=favoriteSeries.filter(e=>e.mal_id!==t)),setFavoriteSerieInLocalStorage(),paintFavoriteList()}function setFavoriteSerieInLocalStorage(){localStorage.setItem("serie-fav",JSON.stringify(favoriteSeries))}function getSerieFromLocalStorage(){const e=localStorage.getItem("serie-fav");favoriteSeries=null===e?[]:JSON.parse(e),paintFavoriteList()}function handleClickResetBtn(){localStorage.removeItem("serie-fav")}searchBtn.addEventListener("click",handleClickBtn),getSerieFromLocalStorage(),resetBtn.addEventListener("click",handleClickResetBtn),console.log(series);const favoriteNumber=document.querySelector(".js-favoriteNumber");function handleClickNumberBtn(e){e.preventDefault(),console.log(favoriteSeries.length)}favoriteNumber.addEventListener("click",handleClickNumberBtn);